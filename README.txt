

要件定義書：企業向けWebサイト構築プラットフォーム（MVP版）


1. プロジェクト概要

企業がノーコードで自社Webサイト（LP、企業情報、ブログ、問い合わせフォーム）を構築・運用できるSaaSプラットフォームのプロトタイプを開発する。
目的: コンセプト（直感的な操作性、柔軟なセクション構成）の検証。
開発フェーズ: モックアップ / プロトタイプ開発

2. ユーザー定義

ユーザー
役割
想定アクション
管理者（テナント）
サイトの作成者
ログイン、ページ作成、セクション配置、テキスト・画像編集、公開設定
閲覧者（ゲスト）
一般ユーザー
公開されたWebサイトの閲覧、フォーム送信


3. 機能要件（MVPスコープ）

モックアップで実装すべき機能を以下に絞り込みます。

3.1 認証・管理機能

管理者ログイン: Supabase Authを使用したメール/パスワード認証。
ダッシュボード: 作成済みサイト（またはページ）の一覧表示。

3.2 ページビルダー（編集画面）

本システムの核となる機能。画面左側に「プレビュー」、右側に「設定パネル」を配置する構成（またはその逆）を想定。
セクション管理:
予め用意されたコンポーネント（ヒーロー画像、特徴リスト、テキストブロック、フォーム）をページに追加できる。
セクションの並び替えができる（上下移動）。
セクションの削除ができる。
コンテンツ編集:
選択したセクション内のテキスト（見出し、本文）をリアルタイムで編集できる。
画像の差し替えができる（MVPではURL指定、またはローカルアップロードの簡易実装）。
保存:
編集内容をDB（Supabase）に保存できる。

3.3 公開サイト表示（ビューワー）

動的レンダリング: DBに保存されたJSONデータを読み込み、Next.jsが適切なコンポーネントをマッピングして表示する。
レスポンシブ対応: PC/SPで崩れずに表示される（Tailwind CSS活用）。

3.4 問い合わせフォーム（簡易）

フォームセクションを配置した場合、入力内容をDBの別テーブルに保存する。

4. データモデル方針（アーキテクチャ）

柔軟性を担保するため、リレーショナルデータとJSONデータを組み合わせます。
Sites: サイト全体のメタデータ（タイトル、ドメイン設定など）。
Pages: ページ単位の管理（スラッグ、SEO用タイトル）。
PageSections: 重要
ここが「WordPressのWebサイト版」を実現する肝です。
content カラムに JSONB型 を採用し、セクションごとに異なるデータ構造（例：ヒーローなら画像+キャッチコピー、ブログならリッチテキスト）をそのまま格納します。

5. UI/UX コンセプト（モックアップ用）

開発工数を抑えつつ、使い勝手を良くするために以下のUI構成を採用します。
Split View Editor（分割画面エディタ）:
左側: 実際のWebサイトの見た目（プレビュー）。ここをクリックすると右側の設定項目が切り替わる。
右側: プロパティエディタ。テキスト入力欄や色設定などが表示される。
理由: 画面上で直接文字を打つ（インライン編集）は実装難易度が高いため、まずはこの形式で検証する。

6. 技術スタック（確定）

Frontend: Next.js (App Router), TypeScript, Tailwind CSS
Backend/DB: Supabase (PostgreSQL, Auth, Storage)
Infra: Vercel
Architecture: Clean Architecture (Domain / Usecase / Infrastructure / UI)

プロフェッショナルからのアドバイス

モックアップ開発において、最も実装が難しく、かつ重要なのは**「3.2 ページビルダー」のデータ構造とUIの同期**です。ここさえクリアできれば、あとは通常のWeb開発と変わりません。
この要件定義でイメージと合致していますでしょうか？
もし問題なければ、次のステップとして**「この要件を満たすためのデータベース設計（ER図とテーブル定義）」**を作成し、開発に着手できる準備を整えます。いかがいたしますか？










要件定義書：企業向けWebサイト構築プラットフォーム（プロダクション版）


1. プロジェクト概要


1.1 ビジョン

企業が専門的なエンジニアリング知識なしで、ブランドイメージを損なわない高品質なWebサイトを構築・運用できるオールインワン・プラットフォームを提供する。

1.2 製品コンセプト

Brand Consistency: 誰が編集してもデザインが崩れない「デザインシステム」の強制力。
Marketing Ready: 作るだけでなく、SEO、集客、リード獲得（フォーム）までを一気通貫で管理。
Team Collaboration: 承認フローや権限管理を備え、組織での運用に耐える設計。

2. ユーザーロールと権限（RBAC）

ロール
権限範囲
想定ユーザー
オーナー
全権限。プラン変更、支払い管理、メンバー招待、サイト削除。
企業の代表、Web担当責任者
管理者
サイト設計、デザイン設定、全ページの編集・公開、フォームデータ閲覧。
Web担当者、マーケター
編集者
記事（ブログ・ニュース）の作成・編集。固定ページのテキスト修正のみ（レイアウト変更不可）。
広報担当、ライター
閲覧者
公開前プレビューの閲覧のみ。
上長（承認者）


3. 機能要件詳細


3.1 サイト管理・共通設定（Global Settings）

企業ブランディングを統一するための基盤機能。
グローバルデザインシステム:
カラーパレット管理: プライマリ、セカンダリ、アクセントカラーを定義。全コンポーネントがこれを参照する（Tailwind CSS変数の動的書き換え）。
タイポグラフィ管理: フォントファミリ、見出しサイズ、本文サイズの一括設定。
カスタムドメイン接続:
ユーザー保有の独自ドメイン（example.com）でのサイト公開（Vercel Domains API連携）。
自動SSL証明書発行。
多言語対応（i18n）:
日本語/英語など複数言語バージョンのページ管理。

3.2 高機能ページビルダー（Visual Builder）

「書きながら直す」を実現するWYSIWYG（What You See Is What You Get）エディタ。
ドラッグ＆ドロップ配置:
セクションの並び替え、グリッドシステムによるカラム操作（2カラム、3カラム等の変更）。
リッチテキスト編集:
選択範囲への太字、リンク、リスト化などの装飾（Tiptapなどのヘッドレスエディタライブラリ採用を想定）。
アセットマネージャー（メディアライブラリ）:
画像のアップロード、トリミング、WebP変換（Supabase Storage + Image Optimization）。
UnsplashなどのストックフォトAPI連携。
履歴管理（Undo/Redo）:
編集操作の取り消し・やり直し機能。
下書き保存とプレビュー:
公開中のバージョンとは別に「ドラフト版」を保持する。
公開用URLとは別の「共有用プレビューURL」の発行。

3.3 CMS・ブログ機能（Dynamic Collections）

LPのような固定ページとは異なる、構造化データの管理。
モデル定義:
「ニュース」「ブログ」「導入事例」「メンバー紹介」などのコンテンツタイプを作成。
記事管理:
記事の作成、タグ付け、カテゴリ分類、予約投稿。
動的ページ生成:
/news/[id] のような詳細ページと、一覧ページの自動生成。

3.4 マーケティング・リード獲得（Growth Tools）

高度なフォームビルダー:
テキスト、ラジオボタン、ファイル添付などのフィールドカスタマイズ。
自動返信メール設定。
サンクスページのリダイレクト設定。
顧客管理（CRM）:
フォーム送信内容をデータベース（Supabase）に蓄積し、管理画面でリスト表示・CSVエクスポート。
Slack/Chatworkへの通知連携。
SEO設定:
ページごとのTitle, Description, OGP画像設定。
sitemap.xml, robots.txt の自動生成。
アクセス解析:
PV数、セッション数などの簡易ダッシュボード（またはGA4/GTMタグ埋め込み機能）。

4. 非機能要件

パフォーマンス: Core Web Vitalsの「Good」基準を満たす（Next.jsのImage Optimization, Script Optimization活用）。
可用性: Vercelのエッジネットワークによる高可用性。
セキュリティ:
WAF（Web Application Firewall）。
DBレベルでのRLS（Row Level Security）によるテナント間の厳格なデータ分離。
拡張性: クリーンアーキテクチャを採用し、将来的な機能追加（例：EC機能、予約機能）に耐える構造。

5. システムアーキテクチャ方針


5.1 フロントエンド (Next.js App Router)

Server Components: 基本的にサーバー側でレンダリングし、クライアントJS量を削減。
Client Components: ビルダー機能、フォーム等のインタラクティブな部分のみに使用。
Middleware: テナントごとのサブドメイン/カスタムドメインによるルーティング振り分け（Multi-tenancy support）。

5.2 データベース設計方針 (Supabase)

プロダクション版では、より正規化を進めつつ、パフォーマンスのためにJSONBを活用します。
tenants (企業アカウント)
users (管理画面ユーザー + 所属テナント)
sites (1テナント複数サイト対応)
assets (メディア管理)
collections (CMSのモデル定義)
collection_items (CMSの記事データ: JSONBでスキーマレスに対応)
form_submissions (問い合わせデータ)

プロフェッショナルからの提案（ネクストアクション）

これが「売れるレベル」のSaaSの姿です。いきなり全部作ると数ヶ月〜半年かかるため、開発戦略としては以下を推奨します。
フェーズ1（MVP）: 固定ページのみ、簡易ビルダー、フォーム送信のみ。 ← まずここを作る
フェーズ2（CMS）: ブログ機能、画像アップローダーの強化。
フェーズ3（Biz）: 独自ドメイン、権限管理、課金連携。
「フェーズ1（MVP）」の構築に着手するために、まずはデータベースの設計図（ER図）を作成しましょうか？
それとも、クリーンアーキテクチャの具体的なディレクトリ構造のセットアップから始めますか？

